step: run_master_level
    belongs to: questions
    expects: all_questions, difficulty, level_name

    note: Run a full Master Level attempt — all 20 questions for the chosen difficulty

    do:
        clear console
        call banner with level_name added to " - Master Level", 44 storing result in lvl_banner
        display lvl_banner
        display ""
        display "Get ready — all 20 questions for the " added to level_name added to " level!"
        display ""
        display "Press ENTER to begin..."
        set dummy to input

        note: Fetch all 20 questions in shuffled order (count = 0 means all)
        call select_questions with all_questions, difficulty, 0 storing result in master_questions

        set score to 0
        set question_num to 1

        repeat for each q in master_questions
            clear console
            display lvl_banner
            display ""
            call ask_question with q, question_num storing result in is_correct
            if is_correct
                set score to score + 1
            set question_num to question_num + 1
            display "Press ENTER to continue..."
            set dummy to input

        note: Show final score out of 20
        call show_final_score with score, 20, level_name added to " (Master)"
        call get_score_feedback with score, 20, level_name, false storing result in feedback
        display feedback
        display ""
