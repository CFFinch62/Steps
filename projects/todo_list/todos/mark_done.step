step: mark_done
    belongs to: todos
    expects: todos
    returns: todos

    note: Mark a todo item as done

    do:
        if length of todos is equal to 0
            display "No todos to mark!"
            display ""
            return todos
        
        display "Your Todos:"
        set index to 1
        repeat for each todo in todos
            display (index as text) added to ". " added to todo["task"]
            set index to index + 1
        
        display ""
        display "Enter number to mark as done: "
        
        attempt:
            set num to input as number
            set todo_index to num - 1
            
            if todo_index is greater than or equal to 0
                if todo_index is less than length of todos
                    set current_todo to todos[todo_index]
                    set current_todo["done"] to "true"
                    set todos[todo_index] to current_todo
                    display "Marked as done!"
                otherwise
                    display "Invalid number."
            otherwise
                display "Invalid number."
        if unsuccessful:
            display "Please enter a valid number."
        
        display ""
        return todos
